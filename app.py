import streamlit as st
import os # Î˜Î± Ï‡ÏÎµÎ¹Î±ÏƒÏ„Î¿ÏÎ¼Îµ Î±Ï…Ï„ÏŒ Î³Î¹Î± Î½Î± Î²ÏÎ¿ÏÎ¼Îµ Ï„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ PDF

# --- Î”Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Î£ÎµÎ»Î¯Î´Î±Ï‚ ---
st.set_page_config(page_title="Gym-Bot: Î‘Î½Î­Î²Î± Î•Ï€Î¯Ï€ÎµÎ´Î¿!", page_icon="ğŸ†")

# --- SIDEBAR: Î›Î¿Î³ÏŒÏ„Ï…Ï€Î¿ & Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ---
with st.sidebar:
    # Î¥Ï€Î¿Î¸Î­Ï„Î¿Ï…Î¼Îµ ÏŒÏ„Î¹ Ï„Î¿ logo1.png ÎµÎ¯Î½Î±Î¹ ÏƒÏ„Î¿Î½ Î¯Î´Î¹Î¿ Ï†Î¬ÎºÎµÎ»Î¿
    if os.path.exists("logo1.png"):
        st.image("logo1.png", width=150)
    else:
        st.warning("Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï„Î¿ logo1.png")
        
    st.divider()
    st.caption(
        "Î‘Ï…Ï„Î® Î· ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Î±Î½Î±Ï€Ï„ÏÏ‡Î¸Î·ÎºÎµ Ï„Î¿Î½ ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿ Ï„Î¿Ï… 2025 ÏƒÏ„Î± Ï€Î»Î±Î¯ÏƒÎ¹Î± Ï„Î·Ï‚ ÎµÏ€Î¹Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ "
        "Î±Ï€ÏŒ Ï„Î¿Î½ **Î“ÎµÏÏÎ³Î¹Î¿ ÎœÏ€Î¿Ï…Ï‡Î¿Ï…ÏÎ¬**."
    )
    st.caption(
        "ÎœÏ€Î¿ÏÎµÎ¯ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ ÎµÎ»ÎµÏÎ¸ÎµÏÎ± Î³Î¹Î± Ï„Î¿Ï…Ï‚ ÏƒÎºÎ¿Ï€Î¿ÏÏ‚ Ï€Î¿Ï… Î±Î½Î±Ï†Î­ÏÎ¿Î½Ï„Î±Î¹ "
        "Î±Ï€ÏŒ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ ÎµÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î¹ÎºÎ¿ÏÏ‚."
    )
    st.caption("Î†Î´ÎµÎ¹Î± Î§ÏÎ®ÏƒÎ·Ï‚: [Creative Commons CC BY 4.0](https://creativecommons.org/licenses/by/4.0/)")

# --- Î‘Î¡Î§Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î— "ÎœÎÎ—ÎœÎ—Î£" (Session State) ---
if 'analysis_done' not in st.session_state:
    st.session_state.analysis_done = False
if 'plan_text' not in st.session_state:
    st.session_state.plan_text = ""
if 'goal' not in st.session_state:
    st.session_state.goal = ""
if 'analysis_output' not in st.session_state:
    st.session_state.analysis_output = []
if 'scores' not in st.session_state:
    st.session_state.scores = {}


# --- ÎšÎ¥Î¡Î™Î‘ Î•Î¦Î‘Î¡ÎœÎŸÎ“Î— ---
st.title("ğŸ† Gym-Bot: Î‘Î½Î­Î²Î± Î•Ï€Î¯Ï€ÎµÎ´Î¿!")
st.write(f"Î“ÎµÎ¹Î±, Î¼ÎµÎ»Î»Î¿Î½Ï„Î¹ÎºÎ­ Î®ÏÏ‰Î±! Î•Î¯Î¼Î±Î¹ Î¿ Gym-Bot ğŸ¤–")

# --- (ÎÎ•Î‘ Î Î¡ÎŸÎ£Î˜Î—ÎšÎ—: DOWNLOAD Î¤ÎŸÎ¥ PDF) ---
pdf_file_path = "instructions.pdf" # Î¤Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î¿Ï… Î±ÏÏ‡ÎµÎ¯Î¿Ï… PDF ÏƒÏ„Î¿ GitHub repo

with st.expander("â“ ÎˆÏ‡Î±ÏƒÎµÏ‚ Ï„Î¿ 'Î¦ÏÎ»Î»Î¿ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®Ï‚' ÏƒÎ¿Ï…;"):
    st.write("ÎœÎ·Î½ Î±Î½Î·ÏƒÏ…Ï‡ÎµÎ¯Ï‚! ÎœÏ€Î¿ÏÎµÎ¯Ï‚ Î½Î± Ï„Î¿ ÎºÎ±Ï„ÎµÎ²Î¬ÏƒÎµÎ¹Ï‚ Î¾Î±Î½Î¬ Î±Ï€ÏŒ ÎµÎ´Ï Î³Î¹Î± Î½Î± Ï„Î¿ ÎµÎºÏ„Ï…Ï€ÏÏƒÎµÎ¹Ï‚.")
    
    try:
        # Î‘Î½Î¿Î¯Î³Î¿Ï…Î¼Îµ Ï„Î¿ Ï„Î¿Ï€Î¹ÎºÏŒ Î±ÏÏ‡ÎµÎ¯Î¿ PDF (Î±Ï€ÏŒ Ï„Î¿ repo) ÏƒÎµ bytes
        with open(pdf_file_path, "rb") as pdf_file:
            PDFbyte = pdf_file.read()

        st.download_button(
            label="ğŸ“¥ ÎšÎ±Ï„Î­Î²Î±ÏƒÎµ Ï„Î¿ Î¦ÏÎ»Î»Î¿ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®Ï‚ (PDF)",
            data=PDFbyte,
            file_name="Fyllo_Apostolis.pdf", # Î¤Î¿ ÏŒÎ½Î¿Î¼Î± Ï€Î¿Ï… Î¸Î± Î´ÎµÎ¹ Î¿ Î¼Î±Î¸Î·Ï„Î®Ï‚
            mime="application/pdf"
        )
    except FileNotFoundError:
        st.error(f"Î£Î¦Î‘Î›ÎœÎ‘: Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ '{pdf_file_path}' ÏƒÏ„Î¿ GitHub repo! (Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï„Î¿ Î±Î½ÎµÎ²Î¬ÏƒÎµÎ¹Ï‚ Ï€ÏÏÏ„Î±)")
# --- (Î¤Î•Î›ÎŸÎ£ ÎÎ•Î‘Î£ Î Î¡ÎŸÎ£Î˜Î—ÎšÎ—Î£) ---


st.divider() 
st.write("ÎˆÏ„Î¿Î¹Î¼Î¿Ï‚ Î½Î± Î´Î¿ÏÎ¼Îµ Ï„Î± **Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬** ÏƒÎ¿Ï…; Î¦Î­ÏÎµ Ï„Î¿ **'Î¦ÏÎ»Î»Î¿ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®Ï‚'** Î±Ï€ÏŒ Ï„Î·Î½ Î±Ï…Î»Î® ÎºÎ±Î¹ Ï€Î¬Î¼Îµ!")

# --- 1. Î•Î™Î£Î‘Î“Î©Î“Î— Î”Î•Î”ÎŸÎœÎ•ÎÎ©Î (C) ---
st.header("ğŸ“‹ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® 1: ÎšÎ±Ï„Î±Ï‡ÏÏÎ·ÏƒÎµ Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬")

col1, col2, col3 = st.columns(3)
with col1:
    pushups = st.number_input("ÎšÎ¬Î¼ÏˆÎµÎ¹Ï‚ (Î”Î¥Î);", min_value=0, step=1)
    feeling_pushups = st.selectbox(
        "Î’Î±Î¸Î¼ÏŒÏ‚ Î”Ï…ÏƒÎºÎ¿Î»Î¯Î±Ï‚ (ÎšÎ¬Î¼ÏˆÎµÎ¹Ï‚);",
        ["", "Î Î±Î½ÎµÏÎºÎ¿Î»Î¿", "Î™ÏƒÎ¿ÏÏÎ¿Ï€Î·Î¼Î­Î½Î¿", "Î”ÏÏƒÎºÎ¿Î»Î¿", "Î•Ï€Î¯Ï€ÎµÎ´Î¿ 'Î‘Ï†ÎµÎ½Ï„Î¹ÎºÎ¿Ï'!"], key="feel_pushups"
    )
with col2:
    plank = st.number_input("Î£Î±Î½Î¯Î´Î± (Î Î¥Î¡) (Î´ÎµÏ…Ï„.);", min_value=0, step=1)
    feeling_plank = st.selectbox(
        "Î’Î±Î¸Î¼ÏŒÏ‚ Î”Ï…ÏƒÎºÎ¿Î»Î¯Î±Ï‚ (Î£Î±Î½Î¯Î´Î±);",
        ["", "Î Î±Î½ÎµÏÎºÎ¿Î»Î¿", "Î™ÏƒÎ¿ÏÏÎ¿Ï€Î·Î¼Î­Î½Î¿", "Î”ÏÏƒÎºÎ¿Î»Î¿", "Î•Ï€Î¯Ï€ÎµÎ´Î¿ 'Î‘Ï†ÎµÎ½Ï„Î¹ÎºÎ¿Ï'!"], key="feel_plank"
    )
with col3:
    sprints = st.number_input("Î“ÏŒÎ½Î±Ï„Î± ÏˆÎ·Î»Î¬ (Î‘ÎÎ¤);", min_value=0, step=1)
    feeling_sprints = st.selectbox(
        "Î’Î±Î¸Î¼ÏŒÏ‚ Î”Ï…ÏƒÎºÎ¿Î»Î¯Î±Ï‚ (Î“ÏŒÎ½Î±Ï„Î±);",
        ["", "Î Î±Î½ÎµÏÎºÎ¿Î»Î¿", "Î™ÏƒÎ¿ÏÏÎ¿Ï€Î·Î¼Î­Î½Î¿", "Î”ÏÏƒÎºÎ¿Î»Î¿", "Î•Ï€Î¯Ï€ÎµÎ´Î¿ 'Î‘Ï†ÎµÎ½Ï„Î¹ÎºÎ¿Ï'!"], key="feel_sprints"
    )


# --- 2. ÎšÎŸÎ¥ÎœÎ Î™ Î‘ÎÎ‘Î›Î¥Î£Î—Î£ ---
if st.button("ğŸš€ Î‘Î½Î¬Î»Ï…ÏƒÎ· Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÏÎ½!"):
    if not feeling_pushups or not feeling_plank or not feeling_sprints or "" in [feeling_pushups, feeling_plank, feeling_sprints]:
        st.warning("ÎŸÏ…Ï€Ï‚! Î ÏÎ­Ï€ÎµÎ¹ Î½Î± ÏƒÏ…Î¼Ï€Î»Î·ÏÏÏƒÎµÎ¹Ï‚ *ÏŒÎ»Î±* Ï„Î± Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬ ÏƒÎ¿Ï… Î³Î¹Î± Î½Î± ÏƒÏ…Î½ÎµÏ‡Î¯ÏƒÎµÎ¹Ï‚!")
        st.session_state.analysis_done = False
    else:
        st.session_state.analysis_done = True
        
        # Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ "Score"
        pushup_score = min(int((pushups / 20.0) * 100), 100) 
        plank_score = min(int((plank / 60.0) * 100), 100)
        sprint_score = min(int((sprints / 50.0) * 100), 100)
        st.session_state.scores = {'Î”Î¥Î': pushup_score, 'Î Î¥Î¡': plank_score, 'Î‘ÎÎ¤': sprint_score}
        
        analysis_texts = []
        if "Î”ÏÏƒÎºÎ¿Î»Î¿" in feeling_pushups or "Î‘Ï†ÎµÎ½Ï„Î¹ÎºÎ¿Ï" in feeling_pushups or pushups < 10:
            analysis_texts.append(("info", "ğŸ’ª **Î”Î¥Î (Î”ÏÎ½Î±Î¼Î·):** ÎšÎ±Î»Î® Ï€ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹Î±! ÎŸÎ¹ ÎºÎ¬Î¼ÏˆÎµÎ¹Ï‚ Î®Ï„Î±Î½ Ï€ÏÏŒÎºÎ»Î·ÏƒÎ·. Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î· Î¹ÎºÎ±Î½ÏŒÏ„Î·Ï„Î± Ï€Î¿Ï… Î¸Î± Î´Ï…Î½Î±Î¼ÏÏƒÎµÎ¹Ï‚! +10 Î ÏŒÎ½Ï„Î¿Î¹ Î•Î¼Ï€ÎµÎ¹ÏÎ¯Î±Ï‚ (Î Î•) Î³Î¹Î± Ï„Î·Î½ Ï€ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹Î±!"))
        else:
            analysis_texts.append(("success", "ğŸ’ª **Î”Î¥Î (Î”ÏÎ½Î±Î¼Î·):** Î©ÏÎ±Î¯Î¿Ï‚! ÎˆÏ‡ÎµÎ¹Ï‚ Î®Î´Î· ÎºÎ±Î»Î® Î¹ÎºÎ±Î½ÏŒÏ„Î·Ï„Î± ÏƒÏ„Î· Î”ÏÎ½Î±Î¼Î·. ÎˆÏ„Î¿Î¹Î¼Î¿Ï‚ Î³Î¹Î± Ï„Î¿ ÎµÏ€ÏŒÎ¼ÎµÎ½Î¿ ÎµÏ€Î¯Ï€ÎµÎ´Î¿!"))

        if "Î”ÏÏƒÎºÎ¿Î»Î¿" in feeling_plank or "Î‘Ï†ÎµÎ½Ï„Î¹ÎºÎ¿Ï" in feeling_plank or plank < 20:
            analysis_texts.append(("info", "ğŸ§˜ **Î Î¥Î¡ (Î Ï…ÏÎ®Î½Î±Ï‚):** Î— ÏƒÎ±Î½Î¯Î´Î± Î®Ï„Î±Î½ 'Î•Ï€Î¯Ï€ÎµÎ´Î¿ Î‘Ï†ÎµÎ½Ï„Î¹ÎºÎ¿Ï'! ÎŸ Ï€Ï…ÏÎ®Î½Î±Ï‚ (ÎºÎ¿Î¹Î»Î¹Î¬/ÏÎ¬Ï‡Î·) ÎµÎ¯Î½Î±Î¹ Î· Î²Î¬ÏƒÎ· ÏƒÎ¿Ï…. Î§ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Ï€ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·!"))
        else:
            analysis_texts.append(("success", "ğŸ§˜ **Î Î¥Î¡ (Î Ï…ÏÎ®Î½Î±Ï‚):** Î‘Ï„ÏƒÎ¬Î»Î¹Î½Î¿Ï‚! ÎŸ Ï€Ï…ÏÎ®Î½Î±Ï‚ ÏƒÎ¿Ï… ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Ï Î´Ï…Î½Î±Ï„ÏŒÏ‚!"))

        if "Î”ÏÏƒÎºÎ¿Î»Î¿" in feeling_sprints or "Î‘Ï†ÎµÎ½Ï„Î¹ÎºÎ¿Ï" in feeling_sprints or sprints < 40:
            analysis_texts.append(("info", "âš¡ **Î‘ÎÎ¤ (Î‘Î½Ï„Î¿Ï‡Î®):** Î›Î±Ï‡Î¬Î½Î¹Î±ÏƒÎµÏ‚; Î— Î±Î½Ï„Î¿Ï‡Î® ÎµÎ¯Î½Î±Î¹ ÎºÎ»ÎµÎ¹Î´Î¯ Î³Î¹Î± Ï„Î¿ Ï€Î±Î¹Ï‡Î½Î¯Î´Î¹. ÎšÎ±Î»ÏŒÏ‚ ÏƒÏ„ÏŒÏ‡Î¿Ï‚ Î³Î¹Î± ÎµÎ¾Î¬ÏƒÎºÎ·ÏƒÎ·!"))
        else:
            analysis_texts.append(("success", "âš¡ **Î‘ÎÎ¤ (Î‘Î½Ï„Î¿Ï‡Î®):** Î¤ÏÎ­Ï‡ÎµÎ¹Ï‚ ÏƒÎ±Î½ Ï„Î¿Î½ Î¬Î½ÎµÎ¼Î¿! Î•Î¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ® Î±Î½Ï„Î¿Ï‡Î®."))
        
        st.session_state.analysis_output = analysis_texts
        st.session_state.goal = ""
        st.session_state.plan_text = ""

# --- 3. Î•ÎœÎ¦Î‘ÎÎ™Î£Î— Î‘ÎÎ‘Î›Î¥Î£Î—Î£ ÎšÎ‘Î™ Î£Î¤ÎŸÎ§Î©Î ---
if st.session_state.analysis_done:
    st.header("ğŸ“Š Î— Î‘Î½Î±Ï†Î¿ÏÎ¬ ÏƒÎ¿Ï…")
    
    st.write("Î™ÎºÎ±Î½ÏŒÏ„Î·Ï„Î± Î”ÏÎ½Î±Î¼Î·Ï‚ (Î”Î¥Î):")
    st.progress(st.session_state.scores.get('Î”Î¥Î', 0))
    st.write("Î™ÎºÎ±Î½ÏŒÏ„Î·Ï„Î± Î Ï…ÏÎ®Î½Î± (Î Î¥Î¡):")
    st.progress(st.session_state.scores.get('Î Î¥Î¡', 0))
    st.write("Î™ÎºÎ±Î½ÏŒÏ„Î·Ï„Î± Î‘Î½Ï„Î¿Ï‡Î®Ï‚ (Î‘ÎÎ¤):")
    st.progress(st.session_state.scores.get('Î‘ÎÎ¤', 0))
    
    for msg_type, text in st.session_state.analysis_output:
        if msg_type == "info":
            st.info(text)
        else:
            st.success(text)

    st.header("ğŸ¯ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® 2: Î’Î¬Î»Îµ Î£Ï„ÏŒÏ‡Î¿")
    st.write("Î¤ÏÏÎ± Ï€Î¿Ï… ÎµÎ¯Î´ÎµÏ‚ Ï„Î± Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬ ÏƒÎ¿Ï…, Î³ÏÎ¬ÏˆÎµ Ï„Î· Î½Î­Î± ÏƒÎ¿Ï… Î±Ï€Î¿ÏƒÏ„Î¿Î»Î®!")
    
    goal_input = st.text_area("Î“ÏÎ¬ÏˆÎµ Ï„Î·Î½ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÎ¿Ï… (Ï€.Ï‡. 'ÎÎ± Î±Î½Î­Î²Ï‰ ÎµÏ€Î¯Ï€ÎµÎ´Î¿ ÏƒÏ„Î¹Ï‚ ÎºÎ¬Î¼ÏˆÎµÎ¹Ï‚, Î½Î± ÎºÎ¬Î½Ï‰ 3 Ï€Î±ÏÎ±Ï€Î¬Î½Ï‰')", key="goal_text_area")

    if st.button("ğŸ“œ ÎšÎ»ÎµÎ¯Î´Ï‰Î¼Î± Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®Ï‚!"):
        if not goal_input:
            st.warning("Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î³ÏÎ¬ÏˆÎµÎ¹Ï‚ Ï„Î·Î½ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÎ¿Ï… Ï€ÏÏÏ„Î±!")
            st.session_state.plan_text = ""
        else:
            st.session_state.goal = goal_input
            st.balloons()
            st.success(f"ÎÎ­Î± Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®: '{st.session_state.goal}'! Î›Î±Î¼Î²Î¬Î½ÎµÎ¹Ï‚ 'Î Î¬Ï€Ï…ÏÎ¿ Î ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚'!")
            
            plan_text = f"## ğŸ“œ Î Î¬Ï€Ï…ÏÎ¿Ï‚ Î ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚ ğŸ“œ\n\n"
            plan_text += f"**Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®:** {st.session_state.goal}\n\n"
            
            # Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï€Î»Î¬Î½Î¿Ï…
            if "ÎºÎ¬Î¼ÏˆÎµÎ¹Ï‚" in st.session_state.goal.lower():
                plan_text += "Î“Î¹Î± Î½Î± Ï€ÎµÏ„ÏÏ‡ÎµÎ¹Ï‚ Î±Ï…Ï„Î® Ï„Î·Î½ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®, Ï€ÏÎ¿Ï„ÎµÎ¯Î½Ï‰ Î±Ï…Ï„ÏŒ Ï„Î¿ **Î Î»Î¬Î½Î¿ Î ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚**:\n"
                plan_text += "1. ğŸ—“ï¸ **Î£Ï…Ï‡Î½ÏŒÏ„Î·Ï„Î±:** 3 Ï†Î¿ÏÎ­Ï‚ Ï„Î·Î½ ÎµÎ²Î´Î¿Î¼Î¬Î´Î± (Ï€.Ï‡. Î”ÎµÏ…Ï„Î­ÏÎ±-Î¤ÎµÏ„Î¬ÏÏ„Î·-Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®).\n"
                plan_text += "2. ğŸ‹ï¸ **Î£ÎµÏ„:** 3 ÏƒÎµÏ„ ÎºÎ¬Î¼ÏˆÎµÎ¹Ï‚ (Î¼Ï€Î¿ÏÎµÎ¯Ï‚ Î½Î± Î²Î¬Î¶ÎµÎ¹Ï‚ Ï„Î± Î³ÏŒÎ½Î±Ï„Î± ÎºÎ¬Ï„Ï‰ Î±Î½ ÎºÎ¿Ï…ÏÎ¬Î¶ÎµÏƒÎ±Î¹).\n"
                plan_text += "3. ğŸ“ˆ **Î•Ï€Î±Î½Î±Î»Î®ÏˆÎµÎ¹Ï‚:** Î£Îµ ÎºÎ¬Î¸Îµ ÏƒÎµÏ„, ÎºÎ¬Î½Îµ ÏŒÏƒÎµÏ‚ Î¼Ï€Î¿ÏÎµÎ¯Ï‚! Î ÏÎ¿ÏƒÏ€Î¬Î¸Î·ÏƒÎµ Ï„Î·Î½ ÎµÏ€ÏŒÎ¼ÎµÎ½Î· Ï†Î¿ÏÎ¬ Î½Î± ÎºÎ¬Î½ÎµÎ¹Ï‚ +1!"
                
            elif "ÏƒÎ±Î½Î¯Î´Î±" in st.session_state.goal.lower():
                plan_text += "Î“Î¹Î± Î½Î± Ï€ÎµÏ„ÏÏ‡ÎµÎ¹Ï‚ Î±Ï…Ï„Î® Ï„Î·Î½ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®, Ï€ÏÎ¿Ï„ÎµÎ¯Î½Ï‰ Î±Ï…Ï„ÏŒ Ï„Î¿ **Î Î»Î¬Î½Î¿ Î ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚**:\n"
                plan_text += "1. ğŸ—“ï¸ **Î£Ï…Ï‡Î½ÏŒÏ„Î·Ï„Î±:** 4 Ï†Î¿ÏÎ­Ï‚ Ï„Î·Î½ ÎµÎ²Î´Î¿Î¼Î¬Î´Î± (Î±ÎºÏŒÎ¼Î± ÎºÎ±Î¹ Î³Î¹Î± 1 Î»ÎµÏ€Ï„ÏŒ Ï„Î·Î½ Î·Î¼Î­ÏÎ±).\n"
                plan_text += "2. ğŸ‹ï¸ **Î£ÎµÏ„:** 3 ÏƒÎµÏ„ ÏƒÎ±Î½Î¯Î´Î±.\n"
                plan_text += "3. ğŸ“ˆ **Î§ÏÏŒÎ½Î¿Ï‚:** Î ÏÎ¿ÏƒÏ€Î¬Î¸Î·ÏƒÎµ Î½Î± ÎºÏÎ±Ï„Î®ÏƒÎµÎ¹Ï‚ 5 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± Ï€Î±ÏÎ±Ï€Î¬Î½Ï‰ ÏƒÎµ ÎºÎ¬Î¸Îµ ÏƒÎµÏ„!"
            
            elif "Î±Î½Ï„Î¿Ï‡Î®" in st.session_state.goal.lower() or "Ï„ÏÎ­Î¾Î¹Î¼Î¿" in st.session_state.goal.lower() or "Î³ÏŒÎ½Î±Ï„Î±" in st.session_state.goal.lower():
                plan_text += "Î“Î¹Î± Î½Î± Ï€ÎµÏ„ÏÏ‡ÎµÎ¹Ï‚ Î±Ï…Ï„Î® Ï„Î·Î½ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® (Î‘ÎÎ¤), Ï€ÏÎ¿Ï„ÎµÎ¯Î½Ï‰ Î±Ï…Ï„ÏŒ Ï„Î¿ **Î Î»Î¬Î½Î¿ Î ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚**:\n"
                plan_text += "1. ğŸ—“ï¸ **Î£Ï…Ï‡Î½ÏŒÏ„Î·Ï„Î±:** 3-4 Ï†Î¿ÏÎ­Ï‚ Ï„Î·Î½ ÎµÎ²Î´Î¿Î¼Î¬Î´Î±.\n"
                plan_text += "2. ğŸ‹ï¸ **Î£ÎµÏ„:** 4 ÏƒÎµÏ„ 'Î•Ï€Î¹Ï„ÏŒÏ€Î¹Î¿ Ï„ÏÎ­Î¾Î¹Î¼Î¿' Î³Î¹Î± 1 Î»ÎµÏ€Ï„ÏŒ Ï„Î¿ ÎºÎ±Î¸Î­Î½Î±.\n"
                plan_text += "3. ğŸ“ˆ **ÎœÏ€ÏŒÎ½Î¿Ï…Ï‚:** Î Î±Î¯Î¾Îµ ÎºÏ…Î½Î·Î³Î·Ï„ÏŒ Î® Î¼Ï€Î¬ÏƒÎºÎµÏ„ ÏƒÏ„Î¿ Î´Î¹Î¬Î»ÎµÎ¹Î¼Î¼Î±. Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î· ÎºÎ±Î»ÏÏ„ÎµÏÎ· ÎµÎ¾Î¬ÏƒÎºÎ·ÏƒÎ· Î³Î¹Î± Î‘Î½Ï„Î¿Ï‡Î®!"

            else:
                plan_text += "Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î•Ï€Î¹ÎºÎ® Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®! Î“Î¹Î± Î½Î± Ï„Î·Î½ Ï€ÎµÏ„ÏÏ‡ÎµÎ¹Ï‚, Î¸Ï…Î¼Î®ÏƒÎ¿Ï… Ï„Î¿Î½ Ï‡ÏÏ…ÏƒÏŒ ÎºÎ±Î½ÏŒÎ½Î±:\n"
                plan_text += "1. ğŸ—“ï¸ **Î£Ï…Î½Î­Ï€ÎµÎ¹Î±:** ÎšÎ¬Î½Îµ ÎºÎ¬Ï„Î¹ ÎºÎ¬Î¸Îµ Î¼Î­ÏÎ± (Ï€.Ï‡. 10 Î»ÎµÏ€Ï„Î¬ Î¬ÏƒÎºÎ·ÏƒÎ·).\n"
                plan_text += "2. ğŸ”¥ **ÎˆÎ½Ï„Î±ÏƒÎ·:** Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î»Î±Ï‡Î±Î½Î¹Î¬Î¶ÎµÎ¹Ï‚ Î»Î¹Î³Î¬ÎºÎ¹ (Î½Î± Î½Î¹ÏÎ¸ÎµÎ¹Ï‚ Ï„Î·Î½ Ï€ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹Î±!).\n"
                plan_text += "3. ğŸ **ÎšÎ±Î»Î® Î´Î¹Î±Ï„ÏÎ¿Ï†Î®:** ÎœÎ·Î½ Î¾ÎµÏ‡Î½Î¬Ï‚ Ï„Î± 'Î¦Î¯Î»Ï„ÏÎ± Î–Ï‰Î®Ï‚' (Ï†ÏÎ¿ÏÏ„Î±/Î½ÎµÏÏŒ)!"
            
            st.session_state.plan_text = plan_text
            
    # Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Î¿Ï… Ï€Î»Î¬Î½Î¿Ï… (Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ ÏƒÏ„Î· Î¼Î½Î®Î¼Î·)
    if st.session_state.plan_text:
        st.markdown(st.session_state.plan_text, unsafe_allow_html=True)
        st.download_button(
            label="ğŸ“¥ ÎšÎ±Ï„Î­Î²Î±ÏƒÎµ Ï„Î·Î½ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÎ¿Ï…!",
            data=st.session_state.plan_text,
            file_name=f"Î—_Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®_ÎœÎ¿Ï….txt"
        )
        
        st.divider()
        st.header("âœ¨ ÎœÎ ÎŸÎÎŸÎ¥Î£: Î¤Î¿ 'ÎœÏ…ÏƒÏ„Î¹ÎºÏŒ' ÏƒÎ¿Ï…")
        st.write("Î¤ÏÏÎ± Ï€Î¿Ï… Î­Ï‡ÎµÎ¹Ï‚ Ï„Î·Î½ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÎ¿Ï…, Ï€Î®Î³Î±Î¹Î½Îµ ÏƒÏ„Î¿ Google Doc / Padlet Ï€Î¿Ï… ÏƒÎ¿Ï… Î­Î´Ï‰ÏƒÎµ Î¿ Î´Î¬ÏƒÎºÎ±Î»Î¿Ï‚ ÎºÎ±Î¹ Î³ÏÎ¬ÏˆÎµ Ï„Î· Î´Î¹ÎºÎ® ÏƒÎ¿Ï… 'Î§ÏÏ…ÏƒÎ® Î£Ï…Î¼Î²Î¿Ï…Î»Î®' Î±Ï€ÏŒ Ï„Î·Î½ ÏÏÎ± Ï„Î·Ï‚ Î±Ï…Î»Î®Ï‚!")