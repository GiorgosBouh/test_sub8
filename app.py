import streamlit as st

# --- Διαμόρφωση Σελίδας ---
st.set_page_config(page_title="Ο Γυμναστής-Bot", page_icon="🤖")

# --- SIDEBAR: Λογότυπο & Πληροφορίες ---
with st.sidebar:
    logo_url = "https://raw.githubusercontent.com/GiorgosBouh/test_sub8/main/logo1.png"
    st.image(logo_url, width=150)
    st.divider()
    st.caption(
        "Αυτή η εφαρμογή (application) αναπτύχθηκε τον Νοέμβριο του 2025 στα πλαίσια της επιμόρφωσης "
        "από τον **Γεώργιο Μπουχουρά**."
    )
    st.caption(
        "Μπορεί να χρησιμοποιηθεί ελεύθερα για τους σκοπούς που αναφέρονται "
        "από όλους τους εκπαιδευτικούς."
    )
    st.caption("Άδεια Χρήσης: [Creative Commons CC BY 4.0](https://creativecommons.org/licenses/by/4.0/)")

# --- ΚΥΡΙΑ ΕΦΑΡΜΟΓΗ ---
st.title("🤖 Ο Γυμναστής-Bot της Στ' Τάξης")
st.write(f"Γεια! Είμαι ο ψηφιακός βοηθός Φυσικής Αγωγής.")
st.write("Πάρε το **Φύλλο Καταγραφής** σου από την αυλή και ας ξεκινήσουμε!")

# --- 1. ΕΙΣΑΓΩΓΗ ΔΕΔΟΜΕΝΩΝ (C) ---
st.header("1. Τι έκανες στην αυλή;")
col1, col2 = st.columns(2)
with col1:
    pushups = st.number_input("Πόσες Κάμψεις έκανες;", min_value=0, step=1)
    plank = st.number_input("Πόσα δευτερόλεπτα έκανες Σανίδα;", min_value=0, step=1)
with col2:
    feeling_pushups = st.selectbox(
        "Πώς σου φάνηκαν οι Κάμψεις;",
        ["", "Εύκολο", "Μέτριο", "Κουραστικό", "Πολύ Κουραστικό"]
    )
    feeling_plank = st.selectbox(
        "Πώς σου φάνηκε η Σανίδα;",
        ["", "Εύκολο", "Μέτριο", "Κουραστικό", "Πολύ Κουραστικό"]
    )

# --- 2. ΛΟΓΙΚΗ "CHATBOT" (P + T) ---
if st.button("🤖 Πάτα για Ανάλυση!"):
    st.header("2. Η Ανάλυσή μου:")
    
    if not feeling_pushups or not feeling_plank:
        st.warning("Παρακαλώ, συμπλήρωσε πώς σου φάνηκαν *και* οι δύο ασκήσεις!")
    else:
        # Λογική για Κάμψεις
        if feeling_pushups == "Πολύ Κουραστικό" or pushups < 10:
            st.info("💪 **Κάμψεις:** Καλή προσπάθεια! Αυτή η άσκηση χτίζει **Μυϊκή Δύναμη** στα χέρια και το στήθος. Φαίνεται ότι αυτός ο τομέας ήταν μια πρόκληση. Είναι τέλειο σημείο για να ξεκινήσεις τη βελτίωσή σου!")
        else:
            st.success("💪 **Κάμψεις:** Εξαιρετική δουλειά! Η δύναμή σου είναι σε πολύ καλό επίπεδο.")

        # Λογική για Σανίδα
        if feeling_plank == "Πολύ Κουραστικό" or plank < 20:
            st.info("🧘 **Σανίδα:** Η σανίδα είναι ζόρικη! Δουλεύει τον 'πυρήνα' (κοιλιά/ράχη). Είναι σημαντικός για τη στάση του σώματός σου. Αξίζει να τον δυναμώσουμε!")
        else:
            st.success("🧘 **Σανίδα:** Πολύ καλά! Ο πυρήνας σου είναι δυνατός!")

        # --- 3. ΚΑΘΟΡΙΣΜΟΣ ΣΤΟΧΩΝ (ΤΟ ΒΗΜΑ ΜΕ ΤΟ "ΝΟΗΜΑ") ---
        st.header("3. Ο Επόμενος Στόχος σου")
        st.write("Με βάση τα παραπάνω, τι θα ήθελες να πετύχεις την επόμενη φορά;")
        
        goal = st.text_area("Γράψε τον στόχο σου (π.χ. 'Θέλω να κάνω 3 κάμψεις παραπάνω')")
        
        # ΕΔΩ ΕΙΝΑΙ Η ΝΕΑ ΛΟΓΙΚΗ
        if goal:
            st.balloons()
            st.success(f"Τέλειος ο στόχος σου: '{goal}'. Καταγράφηκε!")
            
            # Το Bot δημιουργεί το πλάνο με βάση τον στόχο
            st.subheader("🤖 Το Προσωπικό σου Μίνι-Πλάνο!")
            
            plan_text = f"Ο Στόχος μου: {goal}\n\n"
            
            if "κάμψεις" in goal.lower() or "pushups" in goal.lower():
                plan_text += (
                    "Για να το πετύχεις, προτείνω:\n"
                    "1. **3 φορές την εβδομάδα** (π.χ. Δευτέρα-Τετάρτη-Παρασκευή).\n"
                    "2. Κάνε **3 σετ** κάμψεις (μπορείς να βάζεις τα γόνατα κάτω αν κουράζεσαι).\n"
                    "3. Κάνε όσες επαναλήψεις μπορείς σε κάθε σετ. Προσπάθησε την επόμενη φορά να κάνεις +1!"
                )
            elif "σανίδα" in goal.lower() or "plank" in goal.lower():
                plan_text += (
                    "Για να το πετύχεις, προτείνω:\n"
                    "1. **4 φορές την εβδομάδα** (ακόμα και για 1 λεπτό την ημέρα).\n"
                    "2. Κάνε **3 σετ** σανίδα.\n"
                    "3. Προσπάθησε να κρατήσεις 5 δευτερόλεπτα παραπάνω σε κάθε σετ!"
                )
            else:
                plan_text += (
                    "Αυτός είναι ένας πολύ γενικός στόχος. Για να τον πετύχεις, θυμήσου:\n"
                    "1. **Συνέπεια:** Κάνε κάτι κάθε μέρα (π.χ. 10 λεπτά άσκηση).\n"
                    "2. **Ένταση:** Πρέπει να λαχανιάζεις λιγάκι!\n"
                    "3. **Καλή διατροφή:** Μην ξεχνάς τα φρούτα σου!"
                )
                
            st.markdown(plan_text)
            
            # Τώρα δίνουμε στον μαθητή κάτι να "πάρει" μαζί του
            st.download_button(
                label="📥 Κατέβασε το Πλάνο μου",
                data=plan_text,
                file_name=f"Το_Πλανο_Μου.txt"
            )